\chapter{Theoretical Background}

\section{Rigid Body Kinematics}
	A rigid body is a model of a solid object whose deformation is assumed to be negligible. The distance between every pair of points on the body remains constant. Because such a body does not deform, knowledge of the orientation and position of a reference frame fixed to rigid body constitutes knowledge of the position of all points. The position of the rigid body is thus defined as the position of a single point in the body, most commonly its centre of mass. The orientation can be defined using a set of coordinate axes fixed to the body.
	The theory of Lie groups will be used to describe the kinematics of rigid bodies on this report.
			
	\subsection{Lie Groups}		
		A Lie group $\mathbf{G}$ is a group whose elements form a differentiable manifold and group operation and inverse operation are differentiable.
		As a group, $\mathbf{G}$ is a set of elements and a group operation. This group operation is a binary operation that combines two elements and is denoted by multiplication: $AB$ for $A,B \in \mathbf{G}$. Because it is a group, $\mathbf{G}$ satisfies the 4 group axioms:
		\begin{itemize}
		\item \textbf{Closure:} 
			The group operation
			$\mathbf{G} \times \mathbf{G} \mapsto \mathbf{G}$ 
			is a function that maps elements of $\mathbf{G}$ onto itself;
			$\forall A,B \in \mathbf{G}$, $AB \in \mathbf{G}$.
		\item \textbf{Associativity:} Elements of G are associative under the group operation;
			$\forall A,B,C \in \mathbf{G}$, $(AB)C=A(BC)$.
		\item \textbf{Identity:} There exists an identity element $I \in \mathbf{G}$  such that
			$\forall A \in \mathbf{G}$, $IA = AI = A$.
		\item \textbf{Inverse:} For all $A \in \mathbf{G}$ there exists an inverse element $A^{-1} \in \mathbf{G}$ such that $AA^{-1}=A^{-1}A=I$. 
		\end{itemize}
		
		Because the Lie group $\mathbf{G}$ is a differentiable manifold, it is locally Euclidean. This means that the neighbourhood around every element of $\mathbf{G}$ can be approximated with a tangent plane. This property allows calculus to be performed on elements of $\mathbf{G}$.
		
		\subsubsection{Matrix Lie groups}
			A matrix Lie group $\mathbf{G} \subset \mathbf{GL}(n)$ is made up of group elements which are $n \times n$ matrices.
			This work will focus on matrix Lie groups because the form of the exponential map and Lie bracket functions given below only apply to such Lie groups. Generalised concepts for these functions exist, but a more detailed and relevant description can be provided by focusing on matrix Lie groups.
		
		\subsubsection{Lie algebra}
			The tangent space at the identity element of a Lie group is called the Lie algebra $\mathfrak{g}$. It is called the Lie \textit{algebra} because it has a binary operation, known as the Lie bracket $[X,Y]$. For matrix Lie groups the Lie bracket is
			\begin{equation}
				[A,B] \stackrel{\Delta}{=} AB-BA
			\end{equation}
			
		\subsubsection{The exponential map and logarithm map}	
			The canonical mapping from the Lie algebra $\mathfrak{g}$ to the Lie group $\mathbf{G}$ is called the exponential map:
			\begin{equation}
				\exp: \mathfrak{g} \rightarrow \mathbf{G}
			\end{equation}			
			Similarly, the logarithm map maps elements from its domain $\mathbf{D} \subset \mathbf{G}$ to $\mathfrak{g}$
			\begin{equation}
				\log: \mathbf{D} \rightarrow \mathfrak{g}
			\end{equation}
			such that for a group element $A$,
			\begin{equation}
				\exp(\log(A)) = A
			\end{equation}
			For matrix Lie groups, the exponential map and logarithm map correspond to the matrix exponential and matrix logarithm respectively.
						
		\subsubsection{Infinitesimal generators}
			The \textit{hat} operator $(\cdot)^{\wedge}$ can be used to map an $n$-vector to an $m \times m$ matrix representation, when $\mathbb{R}^{m \times m}$ is isomorphic to $\mathbb{R}^n$. (*NOTE - haven't actually used hat since it is used to denote prediction. wedge is a better counterpart to vee anyway. is this okay???)
			\begin{equation}
				\begin{split}
					(\cdot)^{\wedge}: \mathbb{R}^n \rightarrow \mathbb{R}^{m \times m}\\
					x \mapsto x^{\wedge} = \sum\limits_{i=1}^n x_iG_i
				\end{split}
			\end{equation}
			where the set of elements $G_i$ form a basis for $\mathbb{R}^{m \times m}$.
			
			Conversely, the \textit{vee} operator $(\cdot)^{\vee}$ maps matrices in $\mathbb{R}^{m \times m}$ to vectors in $\mathbb{R}^n$ such that ${(x^{\wedge})}^{\vee} = x$
			\begin{equation}
				\begin{split}
					(\cdot)^{\vee}: \mathbb{R}^{m \times m} \rightarrow \mathbb{R}^n\\
					x^{\wedge} \mapsto x
				\end{split}
			\end{equation}
		
			For an \textit{n}-dimensional matrix Lie group, the Lie algebra $\mathfrak{g}$ is a vector space isomorphic to $\mathbb{R}^n$. The hat operator $(\cdot)^{\wedge}$ maps vectors $x \in \mathbb{R}^n$ to elements of $\mathfrak{g}$.	For a matrix Lie group $\mathbf{G}$ whose elements are $\textit{m} \times \textit{m}$ matrices, the elements of $\mathfrak{g}$ will also be $\textit{m} \times \textit{m}$ matrices.		
			\begin{equation}
				\begin{split}
					(\cdot)^{\wedge}:\mathbb{R}^n \rightarrow \mathfrak{g}\\
					x \mapsto x^{\wedge} = \sum\limits_{i=1}^n x_iG_i 
				\end{split}
			\end{equation}
			The basis elements $G_i$ are $\textit{m} \times \textit{m}$ matrices known as the infinitesimal generators of $\mathbf{G}$.
									
		\subsubsection{Lie bracket and group operation}			
			For Lie groups endowned with the commutative property ($\forall A,B \in \mathbf{G}, AB = BA$), vector addition in the Lie algebra maps to a group operation in the Lie group. For $C = A + B$ where $A,B,C \in \mathfrak{g}$,
			\begin{equation}
				e^C = e^{A+B} = e^Ae^B
			\end{equation}
			For non-commutative Lie groups, this relationship between the Lie algebra and Lie group operations do not hold. Instead, for $C = \log{e^Ae^B}$, $C$ is calculated with the Baker-Campbell-Hausdorff formula:
			\begin{equation}
				C = A + B + \frac{1}{2}[A,B] + \frac{1}{12}[A-B,[A,B]] + \frac{1}{24}[B,[A,[A,B]]] + \dots
			\end{equation}	
		
		\subsubsection{Actions}
			When a group action for a Lie group $\mathbf{G}$ acting on a manifold $M$ is a differentiable map, this is known as a Lie group action. For example, 3D rotations act on 3D points so the Lie group $\mathbf{SO}(3)$ acts on $\mathbb{R}^3$. A left action of $\mathbf{G}$ on $M$ is defined as a differentiable map
			\begin{equation}
				\Phi: \mathbf{G} \times M \mapsto M
			\end{equation}
			where
			\begin{itemize}
			\item the identity element $I$ acts as the identity on $M$
				\begin{equation}
					\Phi(I,m) = m \hspace{2em} \forall m \in M
				\end{equation}
			\item Group actions compose according to
				\begin{equation}
					\Phi(m,\Phi(n,o)) = \Phi(mn,o) \hspace{2em} \forall m,n,o \in M
				\end{equation}
			\end{itemize}
		
		\begin{comment}	
		\textbf{Adjoint map}\\		
		EXPLANATION???\\
		For $A \in \mathbf{G}$ and $B \in ?$ define a function $\Psi$, known as the adjoint map of $\mathbf{G}$:
		\begin{equation}
			\Psi_A: \mathbf{G} \rightarrow \mathbf{G} \textnormal{, }
			\Psi_A(B) \stackrel{\Delta}{=} ABA^{-1}
		\end{equation}
		Taking the derivative:
		\begin{equation}
			\frac{\partial}{\partial t} \Psi_A(B(t))|_{t=0} = AVA^{-1} \textnormal{, }
			V \stackrel{\Delta}{=} 	\frac{\partial}{\partial t}B(t)|_{t=0}
		\end{equation}
		The adjoint	representation of $\mathbf{G}$ is given by the mapping
		\begin{equation}
			\textbf{Adj}_A: \mathfrak{g} \rightarrow \mathfrak{g} \textnormal{, }
			\textbf{Adj}_A(V) \stackrel{\Delta}{=} AVA^{-1}
		\end{equation}
		\end{comment}
		
	\subsection{\textbf{SO}(3)}	
		A rotation represents the motion of a point about the origin of a Euclidean space. In $\mathbb{R}^3$ this is a proper isometry: a transformation that preserves distances between any pair of points and has a determinant of +1. The set of all rotations about the origin of $\mathbb{R}^3$ is known as the \textit{special orthogonal group} $\textbf{SO}(3)$.
		Group elements of $\textbf{SO}(3)$ can be represented using a special subset of $3 \times 3$ invertible matrices and in this case, forms a matrix Lie group. Several rotation representations are described later in this section, but the theory presented below only applies to matrix Lie groups which rely on the rotation matrix representation for group elements.
		
		A rotation matrix $\mathbf{R}$ is a $3 \times 3$ matrix that performs a rotation operation when it acts on an element of $\mathbb{R}^3$. The properties of $\mathbf{R}$ are described in more detail below.
		
		\subsubsection{Lie algebra}
		The Lie algebra $\mathfrak{so}(3)$ is a vector space whose elements represent angular velocities. These elements can be represented with $3 \times 3$ skew-symmetric matrices $\bm{\omega}^{\wedge}$, where $\bm{\omega} \in \mathbb{R}^3$ is a 3-vector representing an angular velocity. For
		$\bm{\omega} = 
		\begin{bmatrix}
			\omega_1 & \omega_2 & \omega_3
		\end{bmatrix}^T$, the skew symmetric representation is given by taking the hat representation of $\bm{\omega}$
			\begin{equation}
				\bm{\omega}^{\wedge} =  
				\begin{bmatrix}
					0 			& -\omega_3 & \omega_2	\\
					\omega_3 	& 0 		& -\omega_1	\\
					-\omega_2 	& \omega_1 	& 0			\\
				\end{bmatrix}
			\end{equation}
		
		Elements of $\mathfrak{so}(3)$ are mapped to $\textbf{SO}(3)$ according to the exponential map:
		\begin{equation}
			\begin{split}
				\exp: \mathfrak{so}(3) \rightarrow \mathbf{SO}(3)\\
				\bm{\omega}^{\wedge} \mapsto \exp(\bm{\omega}^{\wedge})
			\end{split}		
		\end{equation}		
		where the matrix $\exp(\bm{\omega}^{\wedge}) \in  \mathbf{SO}(3)$ is a rotation matrix $\mathbf{R}$.
		
		Conversely, the logarithm map maps $3 \times 3$ rotation matrices of $\mathbf{SO}(3)$ to elements of $\mathfrak{so}(3)$:
		\begin{equation}
			\begin{split}
				\log: \mathbf{SO}(3) \rightarrow \mathfrak{so}(3)\\
				 \exp(\bm{\omega}^{\wedge}) \mapsto \bm{\omega}^{\wedge}
			\end{split}		
		\end{equation}		
		This means that for a rotation matrix $\mathbf{R}$, $\log(\mathbf{R}) \in \mathfrak{so}(3)$ and represents an angular velocity.
		
		\subsubsection{Actions}
		By the group action, elements of $\mathbf{SO}(3)$ rotate points $\mathbf{p} \in \mathbb{R}^3$ about the origin. 
		\begin{equation}
			\begin{split}
				\Phi: \mathbf{SO}(3) \times \mathbb{R}^3 \rightarrow \mathbb{R}^3\\
				(\mathbf{R},\mathbf{p}) \mapsto \mathbf{Rp}
			\end{split}	
		\end{equation}
		
		\begin{comment}
		\subsubsection{Adjoint map}
		EXPLANATION???? Hard to explain practical application without discussing reference frames: ie if position defined in body fixed frame but some other transformation defined in inertial frame. First undo rotation to get pose in inertial frame, apply transformation, then re-apply rotation.
		\begin{equation}
			\Psi_R: \mathbf{SO}(3) \rightarrow \mathbf{SO}(3) \textnormal{, }
			\Psi_R(A) \stackrel{\Delta}{=} RAR^{-1}
		\end{equation}
		Taking the derivative:
		\begin{equation}
			\frac{\partial}{\partial t} \Psi_R(A(t))|_{t=0} = RBR^{-1} \textnormal{, }
			B \stackrel{\Delta}{=} 	\frac{\partial}{\partial t}A(t)|_{t=0}
		\end{equation}
		The adjoint	representation of $\mathbf{SO}(3)$ is given by the mapping
		\begin{equation}
			\textbf{Adj}_R: \mathfrak{so}(3) \rightarrow \mathfrak{so}(3) \textnormal{, }
			\textbf{Adj}_R(B) \stackrel{\Delta}{=} RBR^{-1}
		\end{equation}
		\end{comment}
		
		\subsubsection{Rotation representations}	
		There are many conventions by which elements of $\mathbf{SO}(3)$ can be represented. The representations that will be used in this report are described below.
		
		\subsubsection{Rotation matrices}
		A 3D rotation matrix $\mathbf{R}$ is an orthogonal $3 \times 3$ matrix with a determinant of +1. Since $\mathbf{R}$ is orthogonal, its columns and rows are respectively sets of orthogonal unit vectors and
		\begin{equation}
			\mathbf{R}^{-1} = \mathbf{R}^{T}
		\end{equation}		
		The group operation using rotation matrices is simply a matrix multiplication which concatenates the two rotations. The product of two rotation matrices $\mathbf{R}_3 = \mathbf{R}_2\mathbf{R}_1$ is a rotation matrix corresponding to left multiplication by $\mathbf{R}_1$ followed by $\mathbf{R}_2$.
		
		The left action of a rotation matrix $\mathbf{R}$ on a point $\mathbf{p} \in \mathbb{R}^3$ is a left matrix multiplication that rotates $\mathbf{p}$ about the origin.
		
		\subsubsection{Scaled-axis representation}
		An orientation in $\mathbf{R}^3$ can also be represented by a 3-vector $\bm{\theta}$ whose direction $\mathbf{r}$ represents the axis of rotation and magnitude $\theta$ represents the angle of rotation.
		\begin{equation}
			\bm{\theta} = \theta\mathbf{r}
		\end{equation}
		
		Though scaled-axis vectors are not typically used to perform rotations, Rodrigues' rotation formula efficiently converts scaled-axis vectors to rotation matrices:
		\begin{equation} \label{eq:rodrigues}
			\mathbf{R}_{\bm{\theta}} = \mathbf{I} + [\mathbf{r}]_{\times}\sin{\theta} + ([\mathbf{r}]_{\times})^2(1-\cos{\theta})
		\end{equation}
					
		Elements of $\mathfrak{so}(3)$ are typically represented with the hat representation $\bm{\omega}^{\wedge}$ of a scaled-axis vector $\bm{\omega}$, where the magnitude $|\bm{\omega}|$ corresponds to the angular velocity about the axis $\bm{\omega}/|\bm{\omega}|$.
					
		\subsubsection{Rotation quaternions}
		Quaternions are an extension of complex numbers. The set of unit quaternions can be used to represent $\mathbf{SO}(3)$, and will be referred to as rotation quaternions. 
		A rotation quaternion $\mathbf{q}$ is a 4-tuple of real numbers that encode the same information as axis angle. $\mathbf{q}$ is often described in terms of its first element $w$ - the scalar part, and the remaining elements $x,y$ and $z$ - the vector part. Given an axis of rotation $\mathbf{r}$ and an angle of rotation $\theta$:
		\begin{equation}
			\mathbf{q} = 
			\begin{bmatrix}
				w \\
				x \\
				y \\
				z
			\end{bmatrix}
			 = 
			 \begin{bmatrix}
 				w \\
 				\mathbf{v}
			 \end{bmatrix}
			 =
			 \begin{bmatrix}
			 	\cos(\theta/2) \\
			 	\sin(\theta/2)\mathbf{r}
			 \end{bmatrix}
		\end{equation}
		In general, the quaternion inverse is given by
		\begin{equation}
			\mathbf{q}^{-1} = 
			\frac{1}{w^2 + x^2 + y^2 + z^2}
		 	\begin{bmatrix*}[r]
				 w \\
				-x \\
				-y \\
				-z
			\end{bmatrix*}
		\end{equation}
		For unit magnitude rotation quaternions the inverse represents a rotation by $-\theta$ and is given by
		\begin{equation}
			\mathbf{q}^{-1} = 
			\begin{bmatrix}
			 	\cos(\theta/2) \\
			 	-\sin(\theta/2)\mathbf{r}
		 	\end{bmatrix} =
		 	\begin{bmatrix}
				w \\
				-x \\
				-y \\
				-z
			\end{bmatrix}
		\end{equation}
		
		The group operation is performed with quaternion multiplication which is defined:
		\begin{equation}
			\mathbf{q}_1\mathbf{q}_2 =
			\begin{bmatrix}
			 	w_1 \\
			 	\mathbf{v}_1
			\end{bmatrix} 
			\begin{bmatrix}
			 	w_2 \\
			 	\mathbf{v}_2
			\end{bmatrix} 
			=
			\begin{bmatrix}
			 	w_1w_2 - \mathbf{v}_1 \cdot \mathbf{v}_2 \\
			 	w_1\mathbf{v}_2 + w_2\mathbf{v}_1 + \mathbf{v}_1 \times \mathbf{v}_2
			\end{bmatrix} 
		\end{equation} 
		As with rotation matrices, quaternion multiplication is associative but not commutative.
		
		The group action rotates a point $\mathbf{p} \in \mathbb{R}^3$  to $\mathbf{p}'$ by embedding it as the vector part of a quaternion and using a conjugation operation with $\mathbf{q}$:
		formula for rotating vector:
		\begin{equation} \label{quatrot}
			\begin{bmatrix}
			 	0\\
			 	\mathbf{p'}
			\end{bmatrix}
			= \mathbf{q}
			\begin{bmatrix}
			 	0\\
			 	\mathbf{p}
			\end{bmatrix}
			\mathbf{q}^{-1}
		\end{equation}
		
	\subsection{\textbf{SE}(3)}	
		The special Euclidean group $\textbf{SE}(3)$ represents rigid transformation in $\mathbb{R}^3$. This is a matrix Lie group whose elements are the set of all rigid transformations in $\mathbb{R}^3$ and can be represented with $4 \times 4$ matrices of the form
		\begin{equation}
			\textbf{X} = 
			\begin{bmatrix}
				  \mathbf{R}	&	\mathbf{p} \\
				  \textbf{0}_{1 \times 3}		& 	1 
			\end{bmatrix}
		\end{equation}
		where $\mathbf{R} \in \mathbf{SO}(3)$ and 
		$\mathbf{p} = 
		\begin{bmatrix}
			p_x	& p_y & p_z				
		\end{bmatrix}
		^\top \in \mathbb{R}^3$.
		
		$\textbf{SE}(3)$ is a semidirect product of $\textbf{SO}(3)$ and $ \mathbb{R}^3$. As its group elements contain a rotation matrix and translation vector, $\textbf{SE}(3)$ has 6 degrees of freedom and is a 6-dimensional manifold.
			
		\subsubsection{Lie algebra}
		The Lie algebra $\mathfrak{se}(3)$ is a vector space whose elements are $4 \times 4$ matrices of the form
		\begin{equation}
			\begin{bmatrix}
				  \bm{\omega}^{\wedge}	&  \mathbf{v}\\
				  \textbf{0}_{1 \times 3} & 0						  
			\end{bmatrix}
		\end{equation}
		where $\bm{\omega} =
		\begin{bmatrix}
			\omega_x & \omega_y & \omega_z				
		\end{bmatrix}
		^\top \in \mathbf{so}(3)$, representing an angular velocity in scaled axis representation, and
		$\mathbf{v} = 
		\begin{bmatrix}
			v_x & v_y & v_z				
		\end{bmatrix}
		^\top \in T_{\mathbf{p}}\mathbb{R}^3$, representing a linear velocity vector.
		
		Elements of $\mathfrak{se}(3)$ are mapped to $\textbf{SE}(3)$ according to the exponential map:
			\begin{equation}
				\begin{split}
					\exp: \mathfrak{se}(3) \rightarrow \mathbf{SE}(3)\\
					\begin{bmatrix}
						  \bm{\omega}^{\wedge}	&  \mathbf{v}\\
						  \textbf{0}_{1 \times 3} & 0						  
					\end{bmatrix}
					\mapsto 
					\begin{bmatrix}
						  \mathbf{R}	&	\mathbf{p} \\
						  \textbf{0}_{1 \times 3}		& 	1 
					\end{bmatrix}
				\end{split}		
			\end{equation}		
			i.e. $\forall \mathbf{T} \in \mathfrak{se}(3) \textnormal{, } \exp(\mathbf{T}) \in  \mathbf{SE}(3)$
			
			Conversely, the logarithm map maps elements of $\mathbf{SE}(3)$ to elements of $\mathfrak{se}(3)$:
			\begin{equation}
				\begin{split}
					\log: \mathbf{SE}(3) \rightarrow \mathfrak{se}(3)\\
					\begin{bmatrix}
						\mathbf{R}	&	\mathbf{p} \\
						\textbf{0}_{1 \times 3}		& 	1 					 				  
					\end{bmatrix}
					\mapsto
					\begin{bmatrix}
					 	\bm{\omega}^{\wedge}	&  \mathbf{v}\\
					 	\textbf{0}_{1 \times 3} & 0			
					\end{bmatrix}
				\end{split}		
			\end{equation}		
			i.e. $\forall \mathbf{S} \in \mathbf{SE}(3)  \textnormal{, } \log(\mathbf{S}) \in  \mathfrak{se}(3)$
		
		\subsubsection{Actions}
		$\mathbf{SE}(3)$ group elements acts to perform a rigid transformation on points in $\mathbb{R}^3$. This corresponds to a rotation about the origin and a translation.
		To apply a transformation using the $4 \times 4$ matrix elements of $\mathbf{SE}(3)$ to a point $\textbf{p} = (x,y,z) $ in $\mathbb{R}^3$, the point must be represented with homogeneous coordinates: (is $p'$ okay for homogeneous points? $\hat{\:}$ is already used for skew-symmetric matrix)
		\begin{equation}
			\mathbf{p'} = 
			\begin{bmatrix}
				  \mathbf{p} \\
				  1	
			\end{bmatrix} =
			\begin{bmatrix}
				  x	\\
				  y	\\
				  z	\\
				  1	
			\end{bmatrix}
		\end{equation}
		The left group action of $\mathbf{SE}(3)$ is now simply a left matrix multiplication of $\mathbf{p}$:
		\begin{equation}
			\mathbf{p'}_1 = \mathbf{S}\mathbf{p'}_0 = 
			\begin{bmatrix}
				\mathbf{R}	&	\mathbf{p} \\
				\textbf{0}_{1 \times 3}		& 	1 					 				  
			\end{bmatrix}
			\begin{bmatrix}
				\mathbf{p}_0 \\
				1	
			\end{bmatrix}
			=
			\begin{bmatrix}
				\mathbf{R}\mathbf{p}_0 + \mathbf{p}\\
				1	
			\end{bmatrix}
		\end{equation}
		
		\begin{comment}		
		\textbf{Adjoint Map}\\
		EXPLANATION\\
		The adjoint map of $\mathbf{SE}(3)$ is
		\begin{equation}
			\Psi_S: \mathbf{SE}(3) \rightarrow \mathbf{SE}(3) \textnormal{, }
			\Psi_S(A) \stackrel{\Delta}{=} SAS^{-1}
		\end{equation}
		Taking the derivative:
		\begin{equation}
			\frac{\partial}{\partial t} \Psi_S(A(t))|_{t=0} = SBS^{-1} \textnormal{, }
			B \stackrel{\Delta}{=} 	\frac{\partial}{\partial t}A(t)|_{t=0}
		\end{equation}
		The adjoint	representation of $\mathbf{SE}(3)$ is given by the mapping
		\begin{equation}
			\textbf{Adj}_S: \mathfrak{se}(3) \rightarrow \mathfrak{se}(3) \textnormal{, }
			\textbf{Adj}_S(B) \stackrel{\Delta}{=} SBS^{-1}
		\end{equation}
		\end{comment}
		
	\subsection{Reference Frames}
		A reference frame is a system of coordinates that is used to uniquely identify points on a manifold. This report will deal with reference frames on $\mathbb{R}^3$, that are used both to define the position of a point and the pose of a rigid body in 3D space.
		Such a reference frame is represented by an element of \textbf{SE}(3).
		
		The notion of an inertial reference frame is introduced here. This will be defined as a reference frame that is stationary for the purpose of the problem being described. The convention used will be to denote the inertial reference frame as $\{F\}$.
		
		Consider the three reference frames shown in Figure \ref{fig:frames}, denoted $\{F\}$ (the inertial frame),$\{A\}$ and $\{B\}$.
		The notation $^{F}_{A}\mathbf{X}^{}_{B}$ defines the transformation in $\mathbf{X}$ of the reference frame $\{B\}$ with respect to the frame $\{A\}$, defined in the frame $\{F\}$.
		\input{Figures/fig_referenceframes}
		
		For example, $^{F}_{A}\mathbf{R}^{}_{B}$ defines the rotation of $\{B\}$ with respect to $\{A\}$, defined in the inertial frame $\{F\}$.		
		
		\subsubsection{Pose}
		The pose of a rigid body in a given reference frame is defined by its relative position and orientation with respect to the given reference frame and is represented by an element of \textbf{SE}(3). If a rigid body has orientation aligned with a reference frame $\{B\}$ and position at the origin of $\{B\}$, then the pose of the rigid body with respect to $\{A\}$ and defined in $\{F\}$ is:
		\begin{equation}
			{^{F}_{A}\mathbf{S}^{}_{B}} = 
			\begin{bmatrix}
				^{F}_{A}\mathbf{R}^{}_{B}	& 	^{F}_{A}\mathbf{p}^{}_{B}\\
				\textbf{0}_{1 \times 3} & 1						  
			\end{bmatrix}
		\end{equation}		
		
		\subsubsection{Point}
		A point $\mathbf{p} \in \mathbb{R}^3$ in the frame $\{F\}$ is denoted $^F\mathbf{p}$ and is expressed as a 3-vector of the weights used to compose it from the basis vectors of $\{F\}$.
		\begin{equation}
			^{F}\mathbf{p} = 
			\begin{bmatrix}
				^{F}x \\
				^{F}y \\
				^{F}z
			\end{bmatrix}
		\end{equation}
		
		\subsubsection{Homogeneous coordinates}
		To be acted on by an element of $\mathbf{SE}(3)$, a point must be expressed in homogeneous coordinates:
		\begin{equation}
			^{F}\mathbf{p'} = 
			\begin{bmatrix}
				^{F}\mathbf{p} \\
				1
			\end{bmatrix}
		\end{equation}
		
		\subsubsection{Defining a point in terms of another reference frame - CHANGE TIS HEADING}
		Consider a point in $\mathbb{R}^3$ defined as the position of the frame $\{A\}$ with respect to the frame $\{F\}$, defined in terms of the frame $\{A\}$. To redefine the point in terms of $\{F\}$, the left action of ${^{F}_{F}\mathbf{S}^{}_{A}} \in \mathbf{SE}(3)$ is used:
		\begin{equation}
			^{F}\mathbf{p'} = {^{F}_{F}\mathbf{S}^{}_{A}}\:^{A}\mathbf{p'}
		\end{equation}
		
		\subsubsection{Concatenating poses}
		Poses are concatenated by multiplying relative poses.
		\begin{equation}
			{^{F}_{F}\mathbf{X}^{}_{B}} = {^{F}_{F}\mathbf{X}^{}_{A}}\:{^{A}_{A}\mathbf{X}^{}_{B}}
		\end{equation}
		
		\subsubsection{Defining a pose in terms of another reference frame - CHANGE THIS HEADING}
		To define a pose transformation matrix in terms of a different reference frame, a matrix conjugation is used:
		\begin{equation}
			{^{A}_{B}\mathbf{X}^{}_{C}} = ({^{A}_{A}\mathbf{X}^{}_{F}})\:{^{F}_{B}\mathbf{X}^{}_{C}}\:({^{A}_{A}\mathbf{X}^{}_{F}})^{-1}
		\end{equation}

		\subsubsection{Inverse}
		Taking the inverse of a pose transformation matrix has the effect of reversing the transformation, but does not alter the frame that the transformation is defined in terms of.
		\begin{equation}
			({^{F}_{A}\mathbf{X}^{}_{B}})^{-1} = {^{F}_{B}\mathbf{X}^{}_{A}}
		\end{equation}
	
	\subsection{Rigid Body State Representation} \label{state rep}
		The state of a rigid body moving through 3D space can be represented by its linear and angular position, velocity and acceleration. Higher derivatives could be taken but will be ignored for simplicity.
		The inertial frame is denoted $\{F\}$ and a frame $\{A\}$ is fixed to the pose of the moving body.
		
		The pose of the body with respect to the inertial frame at time $t$, defined in $\{F\}$ is represented by the \textbf{screw} matrix ${^{F}_{F}\mathbf{S}^{}_{A}(t)} \in \mathbf{SE}(3)$,
		\begin{equation}
				{^{F}_{F}\mathbf{S}^{}_{A}(t)} = 
				\begin{bmatrix}
						  ^{F}_{F}\mathbf{R}^{}_{A}(t) 	& 	^{F}_{F}\mathbf{p}^{}_{A}(t)\\
						  \textbf{0}_{1 \times 3} & 1						  
				\end{bmatrix}
		\end{equation}
		where $^{F}_{F}\mathbf{R}^{}_{A}(t) \in \mathbf{SO}(3)$ is a rotation matrix, and the position $^{F}_{F}\mathbf{p}^{}_{A}(t) \in \mathbb{R}^3$.
		
		The linear and angular velocity of the body at time $t$ with respect to the inertial frame, defined in the body-fixed frame, is represented by the \textbf{twist} matrix ${^{A}_{F}\mathbf{T}^{}_{A}(t)} \in \mathfrak{se}(3)$,
		\begin{equation}
				{^{A}_{F}\mathbf{T}^{}_{A}(t)} = 
				\begin{bmatrix}
		  {^{A}_{F}\bm{\omega}^{\wedge}_{A}}(t) 	& 	^{A}_{F}\mathbf{v}^{}_{A}(t)\\
		  \textbf{0}_{1 \times 3} & 0						  
				\end{bmatrix}
		\end{equation}
		where $^{A}_{F}\bm{\omega}^{}_{A}(t) \in \mathfrak{so}(3)$ is an angular velocity in the scaled-axis representation, and the linear velocity is $^{A}_{F}\mathbf{v}^{}_{A}(t) \in T\mathbb{R}^3 \equiv \mathbb{R}^3$.
				
		The linear and angular acceleration of the body at time $t$ with respect to the inertial frame, defined in the body-fixed frame, is represented by the \textbf{wrench} matrix ${^{A}_{F}\mathbf{W}^{}_{A}(t)} \in T\mathfrak{se}(3) \equiv \mathfrak{se}(3)$,
		\begin{equation}
				{^{A}_{F}\mathbf{W}^{}_{A}(t)} = 
				\begin{bmatrix}
				  {^{A}_{F}\bm{\alpha}^{\wedge}_{A}}(t) 	& 	^{A}_{F}\mathbf{a}^{}_{A}(t)\\
				  \textbf{0}_{1 \times 3} & 0						  
				\end{bmatrix}
		\end{equation}
		where $^{A}_{F}\bm{\alpha}^{}_{A}(t) \in  T\mathfrak{so}(3)$ is an angular acceleration in the scaled-axis representation, and the linear acceleration is $^{A}_{F}\mathbf{a}^{}_{A}(t) \in T^2\mathbb{R}^3 \equiv \mathbb{R}^3$.
						
		From this point on, frames will dropped in the notation. For a body labelled \textit{x} fixed to a frame $\{A\}$, ${^{F}_{F}\mathbf{S}^{}_{A}}$, ${^{A}_{F}\mathbf{T}^{}_{A}}$ and ${^{A}_{F}\mathbf{W}^{}_{A}}$ will be denoted $\mathbf{S}_x$, $\mathbf{T}_x$ and $\mathbf{W}_x$.
						
	\subsection{Rigid Body Kinematics} \label{kinematics}
		The dynamics of the screw, twist and wrench matrices as they are defined in \ref{state rep} is governed by the following ordinary differential equations (ODEs),
		\begin{equation}
			{\frac{\textnormal{d}}{\textnormal{d}t}} \mathbf{S}(t) =\mathbf{S}(t)\mathbf{T}(t)
		\end{equation}		
		\begin{equation}
			{\frac{\textnormal{d}}{\textnormal{d}t}} \mathbf{T}(t) = \mathbf{W}(t)
		\end{equation}		
		\begin{equation}
			{\frac{\textnormal{d}}{\textnormal{d}t}} \mathbf{W}(t)=\mathbf{f}(t)			
		\end{equation}
		where the function $\mathbf{f}(t)$ is known.
		
	\subsection{Scanning Laser Rangefinder Dynamic Model}
		\textbf{SHOULD THIS BE HERE? DESCRIBED IN MORE DETAIL IN SIMULATION CHAPTER}\\
		A scanning laser rangefinder fixed to a moving rigid body. State is same as moving rigid body defined above (S,T,W)\\+\\
		Unit vector defined in the body fixed frame  - ${^{A}\mathbf{d}(t)} \in T\mathbb{R}^3$.\\+\\
		Range $r(t) \in \mathbb{R}^{0+}$, defining range from $^{F}_{F}\mathbf{p}^{}_{A}(t)$ to nearest object in environment in direction ${^{F}\mathbf{d}(t)} = {^{F}_{F}\mathbf{R}^{}_{A}(t)}\:{^{A}\mathbf{d}(t)}$
		
		Scan direction in sensor frame is vector rotating at constant speed about $z$-axis, with unit size inside sensor's field-of-view and zero size outside it. Measurements returned at regular, discrete times - when $t$ is an integer multiple of $\delta\tau$:
		\begin{equation}
		^{A}\mathbf{d}(t) =
			\begin{cases} 
			      \hfill \begin{bmatrix}
			      		\cos(-\theta + 2\pi t') \\
			      		-\sin(-\theta + 2\pi t') \\
			      		0
			      	\end{bmatrix}    \hfill & \text{ if $t' \leq \theta/\pi$, $t' = k\delta\tau$ where $k \in \mathbb{N}$} \\
			      \hfill \mathbf{0} \hfill & \text{ if $t' > \theta/\pi$, $t' \neq k\delta\tau$ where $k \in \mathbb{N}$} \\
			\end{cases} 
		\end{equation}
		where
		\begin{equation}
		t' = \mod(t,1/d\theta)\:d\theta
		\end{equation}
		
		*$\theta_0$ is start of FOV, $t'=X$ at end of FOV

\section{State Observers}
-observer equations for nonlinear system\\
PLANT - real system. often infinite dimensional.\\
MODEL - simplified model of real system.\\
OBSERVER - estimates state of MODEL\\
plant/state x, output/measurement y, some systems can have input u\\
nonlinear system:
state governed by ODE
\begin{equation}
	\dot{x}(t) = f(x(t),u(t))
\end{equation}
measurement:
\begin{equation}
	y(t) = g(x(t),u(t))
\end{equation}
$$ x \in \mathbb{R}^n, y \in \mathbb{R}^m, u \in \mathbb{R}^p$$
f,g nonlinear functions of dimension n,m respectively

state estimate $\hat{x}$
structure for nonlinear observer
\begin{equation}
	\dot{\hat{x}} = f(\hat{x},u(t)) + L(y(t)-\hat{y}(t))
\end{equation}
\begin{equation}
	\hat{y}(t) = g(\hat{x}(t),u(t)) 
\end{equation}
\begin{equation}
	\dot{\hat{x}} = f(\hat{x},u(t)) + L(y(t)-g(\hat{x}(t),u(t)))
\end{equation}
L maps $\mathbb{R}^m$ to $\mathbb{R}^n$

-mention observability?
-mention symmetric preserving, infinite dimensional observers briefly
